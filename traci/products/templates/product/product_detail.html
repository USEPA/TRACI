{% extends "main/base.html" %}

{% block content %}
<div class="container">
    <h3>Product Step 1: Life Cycle Stage</h3>
    <div class="mb-3 row">
        {# TODO Replace all projects with products, generally update this template #}
        <div class="col-sm-9">{% include 'product/product_details_partial.html' %}</div>
        <div class="col-sm-3 my-2">
            <button onclick="window.location.href='/projects/detail/{{object.project.id}}'"
                    class="my-2 col-md-12 btn btn-md btn-info">Back to Project Details</button>
            <button onclick="window.location.href='/products/edit/{{object.id}}/'"
                    class="my-2 col-md-12 btn btn-md btn-warning">Edit Product Info</button>
            <button onclick="window.location.href='/products/delete/{{object.id}}/'"
                    class="my-2 col-md-12 btn btn-md btn-danger">Delete Product</button>
        </div>
    </div>

    <div class="mt-4 row">
        <div class="col-sm-6">{% include 'lifecyclestage/lifecyclestage_list_partial.html' %}</div>
        <div class="col-sm-6" id="stageDetailPreview"></div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    function addLifeCycleStage(id) {
        window.location.href = '/products/lifecyclestage/create?product_id=' + id;
        console.log("TODO add product.");
    }
    function editLifeCycleStage(btn) {
        if ($(btn).attr('disabled')) return;
        window.location.href = '/products/lifecyclestage/detail/' + $(btn).attr('id');
    }
    function removeLifeCycleStage(btn) {
        if ($(btn).attr('disabled')) return;
        window.location.href = '/products/lifecyclestage/delete/' + $(btn).attr('id');
    }
    function rowClick(id) {
        $("tr").removeClass('table-active');
        $("#" + id).addClass('table-active');
        $("i").removeAttr('disabled');
        $("i").attr('id', id);
    }
</script>
{% endblock %}